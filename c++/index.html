<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>C++ - ZGF Wiki</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "C++";
    var mkdocs_page_input_path = "c++.md";
    var mkdocs_page_url = "/c++/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ZGF Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">C++</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#string">string 前补零</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#_1">得到当前时间</a></li>
        
            <li><a class="toctree-l3" href="#append">写入文件append</a></li>
        
            <li><a class="toctree-l3" href="#float-to-string">float to string</a></li>
        
            <li><a class="toctree-l3" href="#string-to-float">string to float</a></li>
        
            <li><a class="toctree-l3" href="#_2">读取文档每一行内容</a></li>
        
            <li><a class="toctree-l3" href="#_3">文件清空</a></li>
        
            <li><a class="toctree-l3" href="#split">字符串ｓｐｌｉｔ</a></li>
        
            <li><a class="toctree-l3" href="#cmakeliststxt-boost">CMakeLists.txt 引入ｂｏｏｓｔ</a></li>
        
            <li><a class="toctree-l3" href="#explicit">explicit</a></li>
        
            <li><a class="toctree-l3" href="#eigen">Eigen 安装</a></li>
        
            <li><a class="toctree-l3" href="#use-eigen-in-cmake-program">Use Eigen in cmake program</a></li>
        
            <li><a class="toctree-l3" href="#double-to-string-1">double to string 保留小数点后1位</a></li>
        
            <li><a class="toctree-l3" href="#_9">文件头添加注释</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../python/">Python</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../ubuntu18/">Ubuntu18</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Ros/">Ros</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Ros建模/">Ros建模</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../tf_document/">tf_document</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../caffe/">Caffe</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deeplearning/">deeplearning</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../voxelnet/">voxelnet</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../radar_camera_fusion/">radar_camera</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../python有用的函数/">python有用的函数(一)</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../OpenCV/">OpenCV</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../harbor/">Harbor</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ZGF Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>C++</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="string">string 前补零</h1>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;sstream&gt;
#include &lt;iomanip&gt;
using namespace std;
void main()
{
int num = 1024;
stringstream ss;
ss &lt;&lt; setw(5) &lt;&lt; setfill('0') &lt;&lt; num ;
string str;
ss &gt;&gt; str;         //将字符流传给 str
//str = ss.str();  //也可以
cout &lt;&lt; str;
}
</code></pre>
<h2 id="_1">得到当前时间</h2>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;ctime&gt;

int main ()
{
  time_t rawtime;
  struct tm * timeinfo;
  char buffer[80];

  time (&amp;rawtime);
  timeinfo = localtime(&amp;rawtime);

  strftime(buffer,sizeof(buffer),&quot;%d-%m-%Y %H:%M:%S&quot;,timeinfo);
  std::string str(buffer);

  std::cout &lt;&lt; str;

  return 0;
}


std::string get_time()
{
    time_t rawtime;
    struct tm * timeinfo;
    char buffer[80];

    time (&amp;rawtime);
    timeinfo = localtime(&amp;rawtime);

    strftime(buffer,sizeof(buffer),&quot;%d%m%Y%H%M%S&quot;,timeinfo);
    std::string str(buffer);

    std::cout &lt;&lt; str;
    return str;
}
</code></pre>
<h2 id="append">写入文件append</h2>
<pre><code class="language-cpp">#include &lt;fstream&gt;

int main() {  
  std::ofstream outfile;

  outfile.open(&quot;test.txt&quot;, std::ios_base::app); // append instead of overwrite
  outfile &lt;&lt; &quot;Data&quot;; 
  return 0;
}
</code></pre>
<h2 id="float-to-string">float to string</h2>
<p><code>to_string(float)</code></p>
<h2 id="string-to-float">string to float</h2>
<p><code>stof(str)</code></p>
<h2 id="_2">读取文档每一行内容</h2>
<pre><code class="language-cpp">fstream newfile;
newfile.open(learning_file,ios::in);
if (newfile.is_open())
{
    string tp;
    while(getline(newfile, tp))
    {
        cout &lt;&lt; tp &lt;&lt; &quot;\n&quot;;
    }
    newfile.close();
}
</code></pre>
<h2 id="_3">文件清空</h2>
<pre><code>fstream newfile;
newfile.open(learning_file,ios::out);
newfile.close();
</code></pre>
<h2 id="split">字符串ｓｐｌｉｔ</h2>
<pre><code class="language-cpp">#include &lt;boost/algorithm/string.hpp&gt;

std::string text = &quot;Let me split this into words&quot;;
std::vector&lt;std::string&gt; results;

boost::split(results, text, [](char c){return c == ' ';});
</code></pre>
<h2 id="cmakeliststxt-boost">CMakeLists.txt 引入ｂｏｏｓｔ</h2>
<pre><code>find_package(Boost COMPONENTS program_options filesystem REQUIRED )
include_directories(${Boost_INCLUDE_DIRS})
link_directories(${Boost_LIBRARY_DIRS})
target_link_libraries(learning ${catkin_LIBRARIES} ${Boost_LIBRARIES})
</code></pre>
<h2 id="explicit">explicit</h2>
<pre><code class="language-cpp">#include &lt;iostream&gt; 

using namespace std; 

class Complex 
{ 
private: 
    double real; 
    double imag; 

public: 
    // Default constructor 
    Complex(double r = 0.0, double i = 0.0) : real(r), imag(i) {} 

    // A method to compare two Complex numbers 
    bool operator == (Complex rhs) { 
    return (real == rhs.real &amp;&amp; imag == rhs.imag)? true : false; 
    } 
}; 

int main() 
{ 
    // a Complex object 
    Complex com1(3.0, 0.0); 

    if (com1 == 3.0) 
    cout &lt;&lt; &quot;Same&quot;; 
    else
    cout &lt;&lt; &quot;Not Same&quot;; 
    return 0; 
} 
</code></pre>
<p>程序输出　<code>Same</code>
在C ++中，如果类具有可以用单个参数调用的构造函数，则此构造函数将成为转换构造函数，因为这样的构造函数允许将单个参数转换为正在构造的类。
我们可以避免这种隐式转换，因为它们可能导致意外的结果。我们可以在explicit关键字的帮助下使构造函数显式化。\</p>
<pre><code class="language-cpp">using namespace std; 

class Complex 
{ 
private: 
    double real; 
    double imag; 

public: 
    // Default constructor 
    explicit Complex(double r = 0.0, double i = 0.0) : real(r), imag(i) {} 

    // A method to compare two Complex numbers 
    bool operator== (Complex rhs) { 
       return (real == rhs.real &amp;&amp; imag == rhs.imag)? true : false; 
    } 
}; 

int main() 
{ 
    // a Complex object 
    Complex com1(3.0, 0.0); 

    if (com1 == (Complex)3.0) 
       cout &lt;&lt; &quot;Same&quot;; 
    else
       cout &lt;&lt; &quot;Not Same&quot;; 
     return 0; 
} 
</code></pre>
<h2 id="eigen">Eigen 安装</h2>
<p><a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">下载并解压</a></p>
<pre><code class="language-bash">cd eigen-3.3.9/
mkdir build
cmake ..
sudo make install
</code></pre>
<p>因为eigen3默认安装在/usr/local/include下面，所以需要创建软链接</p>
<pre><code class="language-bash">cd /usr/local/include/
sudo ln -sf eigen3/Eigen Eigen
sudo ln -sf eigen3/unsupported unsupported
</code></pre>
<h2 id="use-eigen-in-cmake-program">Use Eigen in cmake program</h2>
<pre><code>```bash
find_package(Eigen3 3.3 REQUIRED)
...
include_directories(${EIGEN3_INCLUDE_DIR})
...
target_link_libraries(example Eigen3::Eigen)
</code></pre>
<h2 id="double-to-string-1">double to string 保留小数点后1位</h2>
<pre><code class="language-cpp">std::string doubleToString(const double &amp;val)

{

    char* chCode;

    chCode = new char[20];

    sprintf(chCode, &quot;%.2lf&quot;, val);

    std::string str(chCode);

    delete[]chCode;

    return str;

}
</code></pre>
<h3 id="_4">读取网口信息</h3>
<pre><code class="language-cpp">#include &lt;arpa/inet.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netdb.h&gt;
#include &lt;ifaddrs.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;linux/if_link.h&gt;
#include &lt;iostream&gt;

std::string my_get_WIP()
{
    struct ifaddrs *ifaddr, *ifa;
    int family, s, n;
    char host[NI_MAXHOST];
    if (getifaddrs(&amp;ifaddr) == -1) {
        perror(&quot;getifaddrs&quot;);
        exit(EXIT_FAILURE);
    }
    std::string result;
    for (ifa = ifaddr, n = 0; ifa != NULL; ifa = ifa-&gt;ifa_next, n++) {
        if (ifa-&gt;ifa_addr == NULL)
            continue;
        family = ifa-&gt;ifa_addr-&gt;sa_family;

        if (family == AF_INET || family == AF_INET6) {
            s = getnameinfo(ifa-&gt;ifa_addr,
                    (family == AF_INET) ? sizeof(struct sockaddr_in) :
                                            sizeof(struct sockaddr_in6),
                    host, NI_MAXHOST,
                    NULL, 0, NI_NUMERICHOST);
            if (s != 0) {
                printf(&quot;getnameinfo() failed: %s\n&quot;, gai_strerror(s));
                exit(EXIT_FAILURE);
            }

        } else if (family == AF_PACKET &amp;&amp; ifa-&gt;ifa_data != NULL) {
            struct rtnl_link_stats *stats = (struct rtnl_link_stats *)ifa-&gt;ifa_data;
        }
        std::string host_str = std::string(host);
        if(host_str.find(&quot;192.168.1.&quot;) != std::string::npos)
        {
            result = std::string(ifa-&gt;ifa_name) +  &quot;:&quot; + host_str;
        }
    }

    freeifaddrs(ifaddr);
    return result;
    exit(EXIT_SUCCESS);

}
</code></pre>
<h3 id="_5">判断字符串是否含有某字符</h3>
<pre><code class="language-cpp">std::size_t find = str.find(&quot;:&quot;);
if(find != std::string::npos)
{
    std::cout &lt;&lt; “find” &lt;&lt; std::endl;
}
</code></pre>
<h3 id="char-to-string">char to string</h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;

std::string char_string(char c)
{
    std::string s;
    std::stringstream ss;
    ss &lt;&lt; c;
    ss &gt;&gt; s;                // or, use `s = ss.str()`
    std::cout &lt;&lt; s &lt;&lt; std::endl;
    return s;
}

int main()
{
    char c = 'A';
    char_string(c);
    return 0;
}
</code></pre>
<h3 id="get-current-executation-path">get current executation path</h3>
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
#include&lt;unistd.h&gt; 
#include&lt;stdlib.h&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;

std::string char_string(char c)
{
    std::string s;
    std::stringstream ss;
    ss &lt;&lt; c;
    ss &gt;&gt; s;                // or, use `s = ss.str()`
    std::cout &lt;&lt; s &lt;&lt; std::endl;
    return s;
}

std::string get_execute_path()
{
    char *buf;
    buf=(char *)malloc(100*sizeof(char));
    getcwd(buf,100);
    return char_string(buf);
}

std::string get 

main() {
char *buf;
buf=(char *)malloc(100*sizeof(char));
getcwd(buf,100);
printf(&quot;\n %s \n&quot;,buf);
}

</code></pre>
<h3 id="get-current-working-directory">get current working directory</h3>
<pre><code class="language-cpp">    printf(&quot;Current working dir: %s\n&quot;, get_current_dir_name());
</code></pre>
<h3 id="get-current-file-path">get current file path</h3>
<pre><code class="language-cpp">std::string get_current_path()
{
    std::string path = __FILE__;
    return path;
}
</code></pre>
<h3 id="get-current-files-direct">get current file's direct</h3>
<pre><code class="language-cpp">std::string get_current_folder()
{
    std::string pathfile = __FILE__;
    std::size_t find = pathfile.find_last_of(&quot;/&quot;);
    std::cout &lt;&lt; find &lt;&lt; std::endl;
    pathfile = pathfile.substr(0,find);
    return pathfile;
}
</code></pre>
<h3 id="_6">获取目录下的文件</h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;dirent.h&gt;

bool get_filelist_from_dir(std::string _path, std::vector&lt;std::string&gt;&amp; _files)
{
    DIR* dir;
    dir = opendir(_path.c_str());
    struct dirent* ptr;
    std::vector&lt;std::string&gt; file;
    while((ptr = readdir(dir)) != NULL)
    {
        if(ptr-&gt;d_name[0] == '.') {continue;}
        file.push_back(ptr-&gt;d_name);
    }
    closedir(dir);
    sort(file.begin(), file.end());
    _files = file;
}

</code></pre>
<h3 id="_7">写入文件</h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;fstream&gt;
using namespace std;

void main()
{
    ofstream in;
    in.open(&quot;com.txt&quot;,ios::trunc); //ios::trunc表示在打开文件前将文件清空,由于是写入,文件不存在则创建
    int i;
    char a='a';
    for(i=1;i&lt;=26;i++)//将26个数字及英文字母写入文件
    {
    if(i&lt;10)
    {
        in&lt;&lt;&quot;0&quot;&lt;&lt;i&lt;&lt;&quot;\t&quot;&lt;&lt;a&lt;&lt;&quot;\n&quot;;
        a++;
    }
    else
    {
        in&lt;&lt;i&lt;&lt;&quot;\t&quot;&lt;&lt;a&lt;&lt;&quot;\n&quot;;
        a++;
    }
    }
    in.close();//关闭文件
}
</code></pre>
<h3 id="_8">产生随机数</h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstdlib&gt;
#include &lt;ctime&gt;
using namespace std;

int main()
{
    srand((int)time(0));  // 产生随机种子  把0换成NULL也行
    for (int i = 0; i &lt; 10; i++)
    {
        cout &lt;&lt; rand()%100&lt;&lt; &quot; &quot;;
    }
    return 0;
}
</code></pre>
<h2 id="_9">文件头添加注释</h2>
<p>sh file</p>
<pre><code>#!/usr/bin/env bash
#coding=utf-8

# var=$(command-name-here)
# var=`command-name-here`

# FILES=$(find . -name '*.c' -or -name '*.cpp' -or -name '*.h')
FILES=`find . -name '*.c'  -or -name '*.cu' -or -name '*.cpp' -or -name '*.h'`

for FILE in ${FILES}
do
    echo ${FILE}
    ex ${FILE} &lt;&lt;eof
1 insert
&quot;&quot;&quot;
 * @author zhangguangfeng
 * @email zgf123458@163.com
 * @create date 2020-12-29 08:56:05
 * @modify date 2020-12-29 08:56:05
 * @desc [description]
&quot;&quot;&quot;

.
xit
eof

done
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../python/" class="btn btn-neutral float-right" title="Python">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../python/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../mathjaxhelper.js"></script>

</body>
</html>
