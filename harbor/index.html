<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Harbor - ZGF Wiki</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Harbor";
    var mkdocs_page_input_path = "harbor.md";
    var mkdocs_page_url = "/harbor/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ZGF Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Atlas200验收报告/">Atlas200验收报告</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Autoware.auto/">Autoware.auto</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Fully convolutional networks for semantic segmentation/">Fully convolutional networks for semantic segmentation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../OpenCV/">OpenCV</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../PCL/">PCL</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../PPO/">PPO</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Qt/">Qt</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../README/">README</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../RL/">RL</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../ROS2/">ROS2</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Ros/">Ros</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Ros建模/">Ros建模</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../agx/">Agx</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../arm_docker/">Arm docker</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../c++/">C++</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../caffe/">Caffe</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../cmake/">Cmake</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../cuda/">Cuda</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deb/">Deb</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deeplearning/">Deeplearning</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deeplearning_work_station/">Deeplearning work station</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../github网页不显示图片/">Github网页不显示图片</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Harbor</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#harbor">harbor 安装部署</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../jekyll/">Jekyll</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../lidar_demo教程/">Lidar demo教程</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../make/">Make</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../python/">Python</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../python有用的函数/">Python有用的函数</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../pytorch/">Pytorch</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../radar_camera_fusion/">Radar camera fusion</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../ros openai/">Ros openai</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../tf_document/">Tf document</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../ubuntu18/">Ubuntu18</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../ubuntu20/">Ubuntu20</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../util_wiki/">Util wiki</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../vision360/">Vision360</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../voxelnet/">Voxelnet</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../摄像机和毫米波坐标系关系/">摄像机和毫米波坐标系关系</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../毫米波和摄像机融合/">毫米波和摄像机融合</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../激光雷达算法盒子/">激光雷达算法盒子</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../笛卡尔积/">笛卡尔积</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ZGF Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Harbor</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="harbor">harbor 安装部署</h1>
<ul>
<li>sudo apt install docker.io</li>
<li>sudo apt install docker-compose</li>
<li>下载 <a href="https://github.com/goharbor/harbor/releases">harbor</a></li>
<li>解压 tar zxvf harbor-online-installer-v2.3.2.tgz</li>
<li>cd harbor</li>
<li>nano harbor.yaml.tmp</li>
<li>```python
  # Configuration file of Harbor</li>
</ul>
<p># The IP address or hostname to access admin UI and registry service.
  # DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.
  hostname: 192.168.2.100</p>
<p># http related config
  http:
    # port for http, default is 80. If https enabled, this port will redirect to https port
    port: 8086</p>
<p># https related config
  # https:
    # https port for harbor, default is 443
    # port: 443
    # The path of cert and key files for nginx
    # certificate: /your/certificate/path
    # private_key: /your/private/key/path</p>
<p># # Uncomment following will enable tls communication between all harbor components
  # internal_tls:
  #   # set enabled to true means internal tls is enabled
  #   enabled: true
  #   # put your cert and key files on dir
  #   dir: /etc/harbor/tls/internal</p>
<p># Uncomment external_url if you want to enable external proxy
  # And when it enabled the hostname will no longer used
  # external_url: https://reg.mydomain.com:8433</p>
<p># The initial password of Harbor admin
  # It only works in first time to install harbor
  # Remember Change the admin password from UI after launching Harbor.
  harbor_admin_password: promote12345</p>
<p># Harbor DB configuration
  database:
    # The password for the root user of Harbor DB. Change this before any production use.
    password: promote12345
    # The maximum number of connections in the idle connection pool. If it &lt;=0, no idle connections are retained.
    max_idle_conns: 100
    # The maximum number of open connections to the database. If it &lt;= 0, then there is no limit on the number of open connections.
    # Note: the default number of connections is 1024 for postgres of harbor.
    max_open_conns: 900</p>
<p># The default data volume
  data_volume: /home/promote/extdisk/harbor/data</p>
<p># Harbor Storage settings by default is using /data dir on local filesystem
  # Uncomment storage_service setting If you want to using external storage
  # storage_service:
  #   # ca_bundle is the path to the custom root ca certificate, which will be injected into the truststore
  #   # of registry's and chart repository's containers.  This is usually needed when the user hosts a internal storage with self signed certificate.
  #   ca_bundle:</p>
<p>#   # storage backend, default is filesystem, options include filesystem, azure, gcs, s3, swift and oss
  #   # for more info about this configuration please refer https://docs.docker.com/registry/configuration/
  #   filesystem:
  #     maxthreads: 100
  #   # set disable to true when you want to disable registry redirect
  #   redirect:
  #     disabled: false</p>
<p># Trivy configuration
  #
  # Trivy DB contains vulnerability information from NVD, Red Hat, and many other upstream vulnerability databases.
  # It is downloaded by Trivy from the GitHub release page https://github.com/aquasecurity/trivy-db/releases and cached
  # in the local file system. In addition, the database contains the update timestamp so Trivy can detect whether it
  # should download a newer version from the Internet or use the cached one. Currently, the database is updated every
  # 12 hours and published as a new release to GitHub.
  trivy:
    # ignoreUnfixed The flag to display only fixed vulnerabilities
    ignore_unfixed: false
    # skipUpdate The flag to enable or disable Trivy DB downloads from GitHub
    #
    # You might want to enable this flag in test or CI/CD environments to avoid GitHub rate limiting issues.
    # If the flag is enabled you have to download the <code>trivy-offline.tar.gz</code> archive manually, extract <code>trivy.db</code> and
    # <code>metadata.json</code> files and mount them in the <code>/home/scanner/.cache/trivy/db</code> path.
    skip_update: false
    #
    # insecure The flag to skip verifying registry certificate
    insecure: false
    # github_token The GitHub access token to download Trivy DB
    #
    # Anonymous downloads from GitHub are subject to the limit of 60 requests per hour. Normally such rate limit is enough
    # for production operations. If, for any reason, it's not enough, you could increase the rate limit to 5000
    # requests per hour by specifying the GitHub access token. For more details on GitHub rate limiting please consult
    # https://developer.github.com/v3/#rate-limiting
    #
    # You can create a GitHub token by following the instructions in
    # https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line
    #
    # github_token: xxx</p>
<p>jobservice:
    # Maximum number of job workers in job service
    max_job_workers: 10</p>
<p>notification:
    # Maximum retry count for webhook job
    webhook_job_max_retry: 10</p>
<p>chart:
    # Change the value of absolute_url to enabled can enable absolute url in chart
    absolute_url: disabled</p>
<p># Log configurations
  log:
    # options are debug, info, warning, error, fatal
    level: info
    # configs for logs in local storage
    local:
      # Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated.
      rotate_count: 50
      # Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in kilobytes.
      # If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G
      # are all valid.
      rotate_size: 200M
      # The directory on your host that store log
      location: /var/log/harbor</p>
<pre><code># Uncomment following lines to enable external syslog endpoint.
# external_endpoint:
#   # protocol used to transmit log to external endpoint, options is tcp or udp
#   protocol: tcp
#   # The host of external endpoint
#   host: localhost
#   # Port of external endpoint
#   port: 5140
</code></pre>
<p>#This attribute is for migrator to detect the version of the .cfg file, DO NOT MODIFY!
  _version: 2.3.0</p>
<p># Uncomment external_database if using external database.
  # external_database:
  #   harbor:
  #     host: harbor_db_host
  #     port: harbor_db_port
  #     db_name: harbor_db_name
  #     username: harbor_db_username
  #     password: harbor_db_password
  #     ssl_mode: disable
  #     max_idle_conns: 2
  #     max_open_conns: 0
  #   notary_signer:
  #     host: notary_signer_db_host
  #     port: notary_signer_db_port
  #     db_name: notary_signer_db_name
  #     username: notary_signer_db_username
  #     password: notary_signer_db_password
  #     ssl_mode: disable
  #   notary_server:
  #     host: notary_server_db_host
  #     port: notary_server_db_port
  #     db_name: notary_server_db_name
  #     username: notary_server_db_username
  #     password: notary_server_db_password
  #     ssl_mode: disable</p>
<p># Uncomment external_redis if using external Redis server
  # external_redis:
  #   # support redis, redis+sentinel
  #   # host for redis: <host_redis>:<port_redis>
  #   # host for redis+sentinel:
  #   #  <host_sentinel1>:<port_sentinel1>,<host_sentinel2>:<port_sentinel2>,<host_sentinel3>:<port_sentinel3>
  #   host: redis:6379
  #   password:
  #   # sentinel_master_set must be set to support redis+sentinel
  #   #sentinel_master_set:
  #   # db_index 0 is for core, it's unchangeable
  #   registry_db_index: 1
  #   jobservice_db_index: 2
  #   chartmuseum_db_index: 3
  #   trivy_db_index: 5
  #   idle_timeout_seconds: 30</p>
<p># Uncomment uaa for trusting the certificate of uaa instance that is hosted via self-signed cert.
  # uaa:
  #   ca_file: /path/to/ca</p>
<p># Global proxy
  # Config http proxy for components, e.g. http://my.proxy.com:3128
  # Components doesn't need to connect to each others via http proxy.
  # Remove component from <code>components</code> array if want disable proxy
  # for it. If you want use proxy for replication, MUST enable proxy
  # for core and jobservice, and set <code>http_proxy</code> and <code>https_proxy</code>.
  # Add domain to the <code>no_proxy</code> field, when you want disable proxy
  # for some special registry.
  proxy:
    http_proxy:
    https_proxy:
    no_proxy:
    components:
      - core
      - jobservice
      - trivy</p>
<p># metric:
  #   enabled: false
  #   port: 9090
  #   path: /metrics
  <code>* cp harbor.yaml.tmp harbor.yaml
* sudo ./install.sh
* 打开浏览器访问 192.168.2.100:8086
* 用户 admin 密码 promote12345
* 在本机 sudo nano /etc/docker/daemon.json 添加
*</code>
  "insecure-registries":["192.168.2.100:8086"]
  <code>* sudo systemctl restart docker
* docker login 192.168.2.100:8086
* 输入自己的用户名和密码
* 推送image
* 先login  `docker login 192.168.2.100:8086`
* 在harbor（192.168.2.100:8086） 上新建项目
*</code>
  docker tag ubuntu:14.04 <harbor_address>/demo/ubuntu:14.04
  <code>*</code>
  docker push <harbor_address>/demo/ubuntu:14.04
  ```</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../jekyll/" class="btn btn-neutral float-right" title="Jekyll">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../github网页不显示图片/" class="btn btn-neutral" title="Github网页不显示图片"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../github网页不显示图片/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../jekyll/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../mathjaxhelper.js"></script>

</body>
</html>
